/*
 * user_runnables.c
 *
 * THIS FILE IS GENERATED! 
 * DON'T MODIFY BY HAND!
 */
#include <inttypes.h>
#include <stdbool.h>
#include "time_funcs.h"
#include "labels.h"
#include "labels_conf.h"
#include "channel.h"
#include "channel_conf.h"
	 
/**
 * Generated initialization function for runnable ABS_FL_T
 */
__attribute__((weak)) void r_ABS_FL_T_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable ABS_FL_T
 */
__attribute__((weak)) void r_ABS_FL_T(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(1875, spec->cid); // Execute for 1875 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable ABS_FL_T
 */
__attribute__((weak)) void r_ABS_FL_T_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable BrakeActuator_FL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FL_LDM_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable BrakeActuator_FL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FL_LDM(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(2250, spec->cid); // Execute for 2250 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable BrakeActuator_FL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FL_LDM_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable ABS_FR_T
 */
__attribute__((weak)) void r_ABS_FR_T_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable ABS_FR_T
 */
__attribute__((weak)) void r_ABS_FR_T(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(1875, spec->cid); // Execute for 1875 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable ABS_FR_T
 */
__attribute__((weak)) void r_ABS_FR_T_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable BrakeActuator_FR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FR_LDM_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable BrakeActuator_FR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FR_LDM(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(2250, spec->cid); // Execute for 2250 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable BrakeActuator_FR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_FR_LDM_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable ABS_RL_T
 */
__attribute__((weak)) void r_ABS_RL_T_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable ABS_RL_T
 */
__attribute__((weak)) void r_ABS_RL_T(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(1875, spec->cid); // Execute for 1875 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable ABS_RL_T
 */
__attribute__((weak)) void r_ABS_RL_T_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable BrakeActuator_RL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RL_LDM_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable BrakeActuator_RL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RL_LDM(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(2250, spec->cid); // Execute for 2250 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable BrakeActuator_RL_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RL_LDM_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable ABS_RR_T
 */
__attribute__((weak)) void r_ABS_RR_T_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable ABS_RR_T
 */
__attribute__((weak)) void r_ABS_RR_T(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(1875, spec->cid); // Execute for 1875 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable ABS_RR_T
 */
__attribute__((weak)) void r_ABS_RR_T_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable BrakeActuator_RR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RR_LDM_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
	
	spec->initialized = true;
}

/**
 * Generated implementation for runnable BrakeActuator_RR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RR_LDM(runnable_spec_t* spec) {
	
	/**
	 * Simulate the execution
	 */
	switch (spec->mode) {
		case 0:
			burn_cycles(2250, spec->cid); // Execute for 2250 us
			break;
		default:
			return;
	}
}

/**
 * Generated deinitialization function for runnable BrakeActuator_RR_LDM
 */
__attribute__((weak)) void r_BrakeActuator_RR_LDM_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	spec->initialized = false;
}

/**
 * Generated initialization function for runnable Rx_pGlobalBrakeController_to_RaspberryPi_2
 * This is a communication runnable (receiver) and should not be changed!
 */
void r_Rx_pGlobalBrakeController_to_RaspberryPi_2_init(runnable_spec_t* spec) {
	printf("[Runnable] Initializing %s\r\n", spec->name);
								
	channel_t* channel = (channel_t*)malloc(sizeof(channel_t));	// Allocate memory for the new channel
	
	channel->msg = (void*)malloc(sizeof(pGlobalBrakeController_to_RaspberryPi_2_t));	// Allocate the memory to temporarily store a message
	
	if (channel != NULL) {
		spec->user_data = channel;	// Link the channel struct to the runnable struct

		channel->name = "pGlobalBrakeController_to_RaspberryPi_2_channel";
		channel->server_coid = -1;
		channel->server = NULL;
		
		channel_create(channel);

		spec->initialized = true;
	}
}

/**
 * Generated implementation for runnable Rx_pGlobalBrakeController_to_RaspberryPi_2
 * This is a communication runnable (receiver) and should not be changed!
 */
void r_Rx_pGlobalBrakeController_to_RaspberryPi_2(runnable_spec_t* spec) {
	channel_t* channel = (channel_t*)spec->user_data;	// get the channel data
	
	pGlobalBrakeController_to_RaspberryPi_2_t* msg = channel->msg;
	
	if (channel_receive(channel, (uint8_t*)msg, sizeof(pGlobalBrakeController_to_RaspberryPi_2_t)) == true) {							// Receive data on the channel
	
		uint8_t* readPointer = (uint8_t*)msg->payload;											// Get a pointer to the payload
	
		for (int i = 0; i < spec->outputLabelCount; i++) {
			memcpy(spec->outputData[i]->data, readPointer, spec->outputData[i]->size);	// Copy the received label to the right position
			readPointer += spec->outputData[i]->size;									// Move the read pointer after the label we just wrote
		}
	} else {
		printf("[Runnable] Error while receiving data. Runnable:  %s\r\n", spec->name);
	}
}

/**
 * Generated deinitialization function for runnable Rx_pGlobalBrakeController_to_RaspberryPi_2
 * This is a communication runnable (receiver) and should not be changed!
 */
void r_Rx_pGlobalBrakeController_to_RaspberryPi_2_deinit(runnable_spec_t* spec) {
	printf("[Runnable] Deinitializing %s\r\n", spec->name);
	
	channel_cleanup((channel_t*)spec->user_data);
	
	spec->initialized = false;
}

